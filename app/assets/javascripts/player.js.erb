var Player = function(name){
  this.name = name;
  this.opponent = null;
  this.pieces;
  Player.all.push(this)
}

Player.all = [];

Player.setAllPieces = function(){
  Player.all.forEach(function(player){
    player.setPieces();
  });
};

Player.opponents = function(){
  Player.all[0].opponent = Player.all[1]
  Player.all[1].opponent = Player.all[0]
}

Player.prototype.findAllMoves = function(){
  var moves = [];
  this.pieces.forEach(function(piece){
    return piece.legalMoves().forEach(function(move){
      moves.push([piece.square, move])
    })
  })
  return moves;
}


Player.prototype.takesTurn = function(){
  Player.setAllPieces();
  if(this.name == 'p1'){
    new Turn(this);
  }else{
    // Board.currentBoard().sendToDatabase();
  }
}

Player.prototype.setPieces = function(){
  this.pieces = Piece.all.filter(function(piece){
    return piece.player == this
  }.bind(this))
}
